<html>
<head>
<style>
h1 {
    color: red;
	font-family: Arial;
	color: blue;
	font-size:28px;
}
h2 {
	color:	green;
	font-family: Arial;
	font-size:12px;
}
body {
    background-color: #111111ff;
}
p {
    border: 1px solid powderblue;
}
textarea#textarea1 {
	width: 600px;
	height: 120px;
	border: 3px solid #cccccc;
	padding: 5px;
	font-family: Tahoma, sans-serif;
	background-position: bottom right;
	background-repeat: no-repeat;
	font-size:15px;
}
</style>

</head>
<body>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<h1>BioSankey - Exploring variants and microbiomes along different timepoints</h1>
<p>
<h2>Please insert variants/genes, which should be displayed</h2>
<textarea name="textarea1" id="textarea1" onfocus="this.value=''; ">You can select either 'all' or 'A1', 'A5', or 'A9' or keywords ('resistance').
If more genes should be visualized, please seperate them by a comma.</textarea>
</textarea>
<button onclick="do_update()">Select</button>
</p>
<script type="text/javascript" src="https://www.google.com/jsapi?autoload={'modules':[{'name':'visualization','version':'1.1','packages':['sankey']}]}"></script>
<div id="sankey_basic" style="width: 900px; height: 300px;"></div>
<script type="text/javascript">
    var data;
	var chart;
	var map = {
'up': [['2h_up','6h_up',23],['2h_up','6h_down',0],['2h_up','6h_LC',32],['6h_up','16h_up',55],['6h_up','16h_down',1],['6h_up','16h_LC',82],['16h_up','24h_up',55],['16h_up','24h_down',0],['16h_up','24h_LC',44],['2h_down','6h_up',3],['2h_down','6h_down',54],['2h_down','6h_LC',116],['6h_down','16h_up',0],['6h_down','16h_down',306],['6h_down','16h_LC',76],['16h_down','24h_up',0],['16h_down','24h_down',254],['16h_down','24h_LC',446],['2h_LC','6h_up',112],['2h_LC','6h_down',328],['2h_LC','6h_LC',820],['6h_LC','16h_up',44],['6h_LC','16h_down',393],['6h_LC','16h_LC',531],['16h_LC','24h_up',110],['16h_LC','24h_down',104],['16h_LC','24h_LC',475],],
'bla': [['dewjkd','eklfwe',34],]
	}

    function do_update(){
		var data = new google.visualization.DataTable();
		data.addColumn('string', 'From');
		data.addColumn('string', 'To');
		data.addColumn('number', 'Weight');

	var map = { 'up': [['2h_up','6h_up',23],['2h_up','6h_down',0],['2h_up','6h_LC',32],['6h_up','16h_up',55],['6h_up','16h_down',1],['6h_up','16h_LC',82],['16h_up','24h_up',55],['16h_up','24h_down',0],['16h_up','24h_LC',44],['2h_down','6h_up',3],['2h_down','6h_down',54],['2h_down','6h_LC',116],['6h_down','16h_up',0],['6h_down','16h_down',306],['6h_down','16h_LC',76],['16h_down','24h_up',0],['16h_down','24h_down',254],['16h_down','24h_LC',446],['2h_LC','6h_up',112],['2h_LC','6h_down',328],['2h_LC','6h_LC',820],['6h_LC','16h_up',44],['6h_LC','16h_down',393],['6h_LC','16h_LC',531],['16h_LC','24h_up',110],['16h_LC','24h_down',104],['16h_LC','24h_LC',475],], 'bla': [['dewjkd','eklfwe',34],]}
	for(var key in map){
		data.addRows(map[key])
	}

    data.addRows([
          [ 'A', 'X', 5 ],
          [ 'A', 'Y', 7 ],
          [ 'A', 'Z', 6 ],
          [ 'B', 'X', 2 ],
          [ 'B', 'Y', 9 ],
          [ 'B', 'Z', 4 ]
        ]);

        var options = {
          width: 600,
            sankey: {
                node: {
                    interactivity: true
                }
            }
        };
        var chart = new google.visualization.Sankey(document.getElementById('sankey_basic'));
        chart.draw(data, options);
          google.visualization.events.addListener(chart, 'select', function() {
              var sel = chart.getSelection();
              if (sel.length)
                  alert('You selected node "' + sel[0].name + '"');
				      data.addRows([
				            [ 'XX', 'X', 5 ],
				            [ 'ZZ', 'OO', 7 ]]);
				      chart.draw(data,options);

          });
	}


	function drawChart() {
		var data = new google.visualization.DataTable();
		data.addColumn('string', 'From');
		data.addColumn('string', 'To');
		data.addColumn('number', 'Weight');

		var map = {'up': [['2h_up','6h_up',23],['2h_up','6h_down',0],['2h_up','6h_LC',32],['6h_up','16h_up',55],['6h_up','16h_down',1],['6h_up','16h_LC',82],['16h_up','24h_up',55],['16h_up','24h_down',0],['16h_up','24h_LC',44],['2h_down','6h_up',3],['2h_down','6h_down',54],['2h_down','6h_LC',116],['6h_down','16h_up',0],['6h_down','16h_down',306],['6h_down','16h_LC',76],['16h_down','24h_up',0],['16h_down','24h_down',254],['16h_down','24h_LC',446],['2h_LC','6h_up',112],['2h_LC','6h_down',328],['2h_LC','6h_LC',820],['6h_LC','16h_up',44],['6h_LC','16h_down',393],['6h_LC','16h_LC',531],['16h_LC','24h_up',110],['16h_LC','24h_down',104],['16h_LC','24h_LC',475],],'bla': [['dewjkd','eklfwe',34],]}

        data.addRows([
          [ 'A', 'X', 5 ],
          [ 'A', 'Y', 7 ],
          [ 'A', 'Z', 6 ],
          [ 'B', 'X', 2 ],
          [ 'B', 'Y', 9 ],
          [ 'B', 'Z', 4 ]
        ]);

        var options = {
          width: 600,
            sankey: {
                node: {
                    interactivity: true
                }
            }
        };
        var chart = new google.visualization.Sankey(document.getElementById('sankey_basic'));
        chart.draw(data, options);
          google.visualization.events.addListener(chart, 'select', function() {
              var sel = chart.getSelection();
              if (sel.length)
                  alert('You selected node "' + sel[0].name + '"');
          });
      }
</script>
<hr>
<h2>Citation</h2>
Platzer Alexander, ..... BioSankey - another useless tool...
</body>
</html>
